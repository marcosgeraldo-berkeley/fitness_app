{% extends "base.html" %}

{% block title %}FitPlan - Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="phone-frame">
    <div class="plan-header">
    <div class="app-logo"><img src="{{ url_for('static', filename='images/logo.png') }}" alt="MacroMind Logo"></div>        
    <div class="app-name">Welcome back, {{ user_name }}!</div>
    </div>
    
    <!-- Nutrition Targets Section -->
    {% if nutrition_targets %}
        <div class="nutrition-targets-card">
            <div class="nutrition-header">
                Your Daily Nutrition Targets
            </div>
            <div class="calories-display">üìã Daily Energy :
                {{ nutrition_targets.calories }} <span class="calories-label">kcal</span>
            </div>
            <div class="macros-grid">
                <div class="macro-item">
                    <div class="macro-icon">ü•©</div>
                    <div class="macro-value">{{ nutrition_targets.protein_g }}g</div>
                    <div class="macro-label">Protein ({{ nutrition_targets.protein_pct }}%)</div>
                </div>
                <div class="macro-item">
                    <div class="macro-icon">üçû</div>
                    <div class="macro-value">{{ nutrition_targets.carbs_g }}g</div>
                    <div class="macro-label">Carbs ({{ nutrition_targets.carbs_pct }}%)</div>
                </div>
                <div class="macro-item">
                    <div class="macro-icon">ü•ë</div>
                    <div class="macro-value">{{ nutrition_targets.fat_g }}g</div>
                    <div class="macro-label">Fat ({{ nutrition_targets.fat_pct }}%)</div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="no-targets-message">
            üí° Complete your profile to see personalized nutrition targets
        </div>
    {% endif %}
    
    <div class="scrollable-content">
        <!-- Quick Stats
        {% if workout_plan %}
        <div class="workout-stats">
            {% if workout_plan.workout_days_per_week %}
            <div class="stat-item">
                <span class="stat-value">{{ workout_plan.workout_days_per_week }}</span>
                <span class="stat-label">Workouts/Week</span>
            </div>
            {% endif %}
            
            {% if workout_plan.total_weekly_calories %}
            <div class="stat-item">
                <span class="stat-value">{{ workout_plan.total_weekly_calories|int }}</span>
                <span class="stat-label">Weekly Calories</span>
            </div>
            {% endif %}
            
            {% if workout_plan.fitness_level %}
            <div class="stat-item">
                <span class="stat-value">{{ workout_plan.fitness_level|title }}</span>
                <span class="stat-label">Fitness Level</span>
            </div>
            {% endif %}
        </div>
        {% endif %} -->
        
        <!-- Navigation Cards -->
        <div style="margin-top: 1px;">
            <a href="{{ url_for('workout_page') }}" style="text-decoration: none;">
                <div class="workout-day" style="cursor: pointer;">
                    <div class="workout-day-header" >
                        <div>
                            <div class="workout-day-title">üí™ Your Workout Plan</div>
                            <p style="font-size: 11px; color: #666; margin: 4px 0 0 0;">
                                {% if workout_plan %}
                                    View your personalized {{ workout_plan.workout_days_per_week }}-day workout schedule
                                {% else %}
                                    Create your personalized workout plan
                                {% endif %}
                            </p>
                        </div>
                        <div style="font-size: 20px; color: #667eea;">‚Üí</div>
                    </div>
                </div>
            </a>
            
            <a href="{{ url_for('meals_page') }}" style="text-decoration: none;">
                <div class="workout-day" style="cursor: pointer; border-left-color: #52c41a; background: #f8fff8;">
                    <div class="workout-day-header">
                        <div>
                            <div class="workout-day-title">ü•ó Your Meal Plan</div>
                            <p style="font-size: 11px; color: #666; margin: 4px 0 0 0;">
                                {% if first_day %}
                                    View your daily meal recommendations
                                {% else %}
                                    Create your personalized meal plan
                                {% endif %}
                            </p>
                        </div>
                        <div style="font-size: 20px; color: #52c41a;">‚Üí</div>
                    </div>
                </div>
            </a>
            
            <a href="{{ url_for('grocery_page') }}" style="text-decoration: none;">
                <div class="workout-day" style="cursor: pointer; border-left-color: #fa8c16; background: #fffaf0;">
                    <div class="workout-day-header">
                        <div>
                            <div class="workout-day-title">üõí Your Shopping List</div>
                            <p style="font-size: 11px; color: #666; margin: 4px 0 0 0;">
                                {% if grocery_list %}
                                    View your weekly grocery list
                                {% else %}
                                    Create your shopping list
                                {% endif %}
                            </p>
                        </div>
                        <div style="font-size: 20px; color: #fa8c16;">‚Üí</div>
                    </div>
                </div>
            </a>
        </div>
        
        {% if not workout_plan and not first_day %}
        <div class="alert-box" style="margin-top: 20px;">
            <p class="alert-text">üí° No fitness plan for this week yet. Update your profile and create a new plan.</p>
        </div>
        {% endif %}
    </div>
    
    <div class="navigation">
        <a href="{{ url_for('profile_summary') }}">
            <button class="btn-primary" style="width: 180px; margin-top: 5px;">View Profile</button>
        </a>
        <a href="{{ url_for('logout') }}">
            <button class="btn-primary" style="width: 100px; margin-top: 5px;">Logout</button>
        </a>
    </div>
</div>

<style>
    /* Reuse existing workout-stats style */
    .workout-stats {
        display: flex;
        justify-content: space-around;
        background: linear-gradient(135deg, #e6f2ff 0%, #f0f8ff 100%);
        border-radius: 10px;
        padding: 12px;
        margin-bottom: 15px;
        font-size: 11px;
    }
    
    .stat-item {
        text-align: center;
    }
    
    .stat-value {
        font-size: 16px;
        font-weight: bold;
        color: #667eea;
        display: block;
    }
    
    .stat-label {
        color: #666;
        font-size: 10px;
        margin-top: 2px;
    }
</style>
{% endblock %}
