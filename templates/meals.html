{% extends "base.html" %}

{% block title %}FitPlan - Meal Plan{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="phone-frame">
    <div class="plan-header">
        <div class="app-logo">ü•ó</div>
        <div class="app-name">Your Meal Plan</div>
        <div class="app-tagline">{{ meal_plan.daily_calories or 'Custom' }} cal/day ‚Ä¢ Gluten-free</div>
    </div>
    
    <div class="scrollable-content">
        {% if first_day %}
            <h3 style="font-size: 14px; margin-bottom: 10px; text-align: center; color: #333;">
                Today, {{ first_day.date }}
            </h3>
            
            {% for meal in first_day.meals %}
                <div class="meal-card">
                    <div class="meal-header">
                        <div class="meal-title">{{ meal.title }}</div>
                        <div class="meal-calories">{{ meal.calories }} cal</div>
                    </div>
                    <div class="meal-description">{{ meal.description }}</div>
                    <div class="macros">
                        <span>P: {{ meal.macros.protein }}</span>
                        <span>C: {{ meal.macros.carbs }}</span>
                        <span>F: {{ meal.macros.fat }}</span>
                    </div>
                </div>
            {% endfor %}
            
            <div class="summary-box">
                <div class="summary-row">
                    <span>Daily Total:</span>
                    <span>{{ meal_plan.daily_calories or first_day.total_calories or 'N/A' }} calories</span>
                </div>
            </div>
            
            {% if meal_plan and meal_plan.days and meal_plan.days|length > 1 %}
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn-secondary" onclick="showFullWeekPlan()">View Full Week</button>
                </div>
            {% endif %}
        {% else %}
            <div class="empty-state">
                <p>No meal plan available. Please complete your profile first.</p>
            </div>
        {% endif %}
    </div>
    
    <div class="navigation">
        <a href="{{ url_for('dashboard') }}">
            <button class="btn-secondary">‚Üê Back to Dashboard</button>
        </a>
        {% if first_day %}
            <button class="btn-primary" onclick="alert('View recipes feature coming soon!')">View Recipes</button>
        {% else %}
            <a href="{{ url_for('basic_info') }}">
                <button class="btn-primary">Complete Profile</button>
            </a>
        {% endif %}
    </div>
</div>

<script>
function showFullWeekPlan() {
    alert('Full week view feature coming soon!');
}
</script>
{% endblock %}
